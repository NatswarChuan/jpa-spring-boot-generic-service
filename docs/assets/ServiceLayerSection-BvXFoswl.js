import{u as p,e as a,c as m,o as u,a as e,t as l,b as o,d as r,f as d}from"./index-tzEnmmga.js";import{_ as n}from"./CodeBlock-43NKrjhX.js";const x={id:"service-layer",class:"scroll-mt-20 mb-16"},v={class:"text-3xl font-bold text-slate-900 border-b pb-4 mb-8"},f={class:"text-slate-600 italic mb-6"},g={id:"core-service",class:"mb-10 scroll-mt-24"},y={class:"text-xl font-bold text-slate-800 mb-6"},h=["innerHTML"],_={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},w={class:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm hover:border-blue-400 transition-colors"},k={class:"text-sm text-slate-500 mb-4 h-10"},$={class:"text-sm text-slate-600 space-y-2 mb-4"},S={class:"flex items-center"},P={class:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm hover:border-blue-400 transition-colors"},A={class:"text-sm text-slate-500 mb-4 h-10"},D={class:"text-sm text-slate-600 space-y-2 mb-4"},O={class:"flex items-center"},R={class:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm hover:border-blue-400 transition-colors"},C={class:"text-sm text-slate-500 mb-4 h-10"},N={class:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm hover:border-blue-400 transition-colors"},B={class:"text-sm text-slate-500 mb-4 h-10"},E={class:"bg-indigo-50 rounded-xl border border-indigo-200 p-5 shadow-sm relative overflow-hidden col-span-1 md:col-span-2 lg:col-span-2"},H={class:"flex items-center gap-2 mb-3 relative z-10"},T={class:"bg-indigo-600 text-white px-2 py-1 rounded text-xs font-bold uppercase shadow"},U={class:"font-bold text-indigo-900"},K={class:"text-sm text-indigo-700 mb-4 h-10 relative z-10"},L={class:"bg-slate-50 rounded-lg p-5 border border-slate-200 font-mono text-sm overflow-x-auto"},V={class:"text-slate-500 mb-2"},q={id:"service-hooks",class:"mb-10 scroll-mt-24"},z={class:"text-xl font-bold text-slate-800 mb-3"},M={class:"text-slate-600 mb-6"},j={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-6"},I={class:"space-y-6"},F={class:"bg-slate-50 rounded-xl p-6 border border-slate-200"},G={class:"font-bold text-slate-700 mb-4 flex items-center"},J={class:"relative pl-4 border-l-2 border-slate-300 space-y-6"},Q={class:"relative"},W={class:"text-slate-600 text-sm"},X={class:"relative"},Y={class:"text-slate-600 text-xs"},Z={class:"bg-sky-50 rounded-xl p-6 border border-sky-200"},ee={class:"font-bold text-sky-800 mb-4 flex items-center"},te={class:"relative pl-4 border-l-2 border-sky-300 space-y-6"},se={class:"relative"},le={class:"text-slate-600 text-xs"},oe={class:"relative"},re={class:"text-slate-600 text-xs"},ie={class:"space-y-4"},ae={class:"bg-indigo-50 p-4 rounded-lg border border-indigo-100 mb-2"},de={class:"font-bold text-indigo-900 text-sm mb-2"},pe={__name:"ServiceLayerSection",setup(ne){const{t:i}=p(),c=a(()=>`package com.example.demo.service;

import com.example.demo.domain.Product;
import com.example.demo.repository.ProductRepository;
import com.natswarchuan.genericservice.service.AbService;
import org.springframework.stereotype.Service;
import org.springframework.lang.NonNull;

/**
 * Service xử lý nghiệp vụ cho Product.
 * Kế thừa AbService để tận dụng logic CRUD có sẵn.
 */
@Service
public class ProductService extends AbService<Product, Long> {

    public ProductService(@NonNull ProductRepository repository) {
        super(repository);
    }
}
`),b=a(()=>`@Override
protected Product beforeCreate(Product entity) {
    ${i("service_layer.hooks.code_comment_before")}
    if (entity.getPrice().compareTo(BigDecimal.valueOf(1000)) > 0) {
        entity.setPrice(entity.getPrice().multiply(BigDecimal.valueOf(0.9)));
    }
    return entity;
}

@Override
protected Product afterCreate(Product entity) {
    ${i("service_layer.hooks.code_comment_after")}
    notificationService.send("New product added: " + entity.getName());
    return entity;
}
`);return(s,t)=>(u(),m("section",x,[e("h2",v,l(s.$t("service_layer.title")),1),e("p",f,l(s.$t("service_layer.subtitle")),1),e("article",g,[e("h3",y,[t[0]||(t[0]=e("span",{class:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm mr-3"},"7.1",-1)),o(" "+l(s.$t("service_layer.base.title")),1)]),e("p",{class:"text-slate-600 mb-6",innerHTML:s.$t("service_layer.base.desc")},null,8,h),e("div",_,[e("div",w,[t[3]||(t[3]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"bg-amber-100 text-amber-700 px-2 py-1 rounded text-xs font-bold uppercase"},"Base"),e("h4",{class:"font-bold text-slate-800"},"AbReadSummaryService")],-1)),e("p",k,l(s.$t("service_layer.base.menu.read_summary.question")),1),e("ul",$,[t[2]||(t[2]=e("li",{class:"flex items-center"},[e("span",{class:"text-green-500 mr-2"},"✓"),o(" findAll (Page/List)")],-1)),e("li",S,[t[1]||(t[1]=e("span",{class:"text-green-500 mr-2"},"✓",-1)),o(" "+l(s.$t("service_layer.base.menu.read_summary.features")),1)])])]),e("div",P,[t[6]||(t[6]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold uppercase"},"Base"),e("h4",{class:"font-bold text-slate-800"},"AbReadDetailService")],-1)),e("p",A,l(s.$t("service_layer.base.menu.read_detail.question")),1),e("ul",D,[t[5]||(t[5]=e("li",{class:"flex items-center"},[e("span",{class:"text-blue-500 mr-2"},"➜"),o(" All of Summary")],-1)),e("li",O,[t[4]||(t[4]=e("span",{class:"text-green-500 mr-2"},"✓",-1)),o(" "+l(s.$t("service_layer.base.menu.read_detail.features")),1)])])]),e("div",R,[t[7]||(t[7]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"bg-pink-100 text-pink-700 px-2 py-1 rounded text-xs font-bold uppercase"},"Base"),e("h4",{class:"font-bold text-slate-800"},"AbCreateService")],-1)),e("p",C,l(s.$t("service_layer.base.menu.create.question")),1),t[8]||(t[8]=r('<ul class="text-sm text-slate-600 space-y-2 mb-4"><li class="flex items-center"><span class="text-blue-500 mr-2">➜</span> All of Read Detail</li><li class="flex items-center"><span class="text-green-500 mr-2">✓</span> create (Entity/DTO)</li></ul>',1))]),e("div",N,[t[9]||(t[9]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs font-bold uppercase"},"Base"),e("h4",{class:"font-bold text-slate-800"},"AbUpdateService")],-1)),e("p",B,l(s.$t("service_layer.base.menu.update.question")),1),t[10]||(t[10]=r('<ul class="text-sm text-slate-600 space-y-2 mb-4"><li class="flex items-center"><span class="text-blue-500 mr-2">➜</span> All of Create</li><li class="flex items-center"><span class="text-green-500 mr-2">✓</span> update, save</li></ul>',1))]),e("div",E,[t[11]||(t[11]=e("div",{class:"absolute right-0 top-0 w-24 h-24 bg-indigo-100 rounded-bl-full -mr-10 -mt-10 opacity-50"},null,-1)),e("div",H,[e("span",T,l(s.$t("service_layer.base.menu.full.rec")),1),e("h4",U,l(s.$t("service_layer.base.menu.full.title")),1)]),e("p",K,l(s.$t("service_layer.base.menu.full.desc")),1),t[12]||(t[12]=r('<div class="grid grid-cols-2 gap-4 relative z-10"><ul class="text-sm text-indigo-800 space-y-2"><li class="flex items-center font-semibold"><span class="text-indigo-600 mr-2">➜</span> All features</li></ul><ul class="text-sm text-indigo-800 space-y-2"><li class="flex items-center"><span class="text-green-600 mr-2 font-bold">✓</span> delete (Soft/Hard)</li></ul></div>',1))])]),e("div",L,[e("p",V,l(s.$t("service_layer.base.code_comment")),1),d(n,{filename:"ProductService.java",code:c.value},null,8,["code"])])]),e("article",q,[e("h3",z,[t[13]||(t[13]=e("span",{class:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm mr-3"},"7.2",-1)),o(" "+l(s.$t("service_layer.hooks.title")),1)]),e("p",M,l(s.$t("service_layer.hooks.desc")),1),e("div",j,[e("div",I,[e("div",F,[e("h4",G,[t[14]||(t[14]=e("span",{class:"w-2 h-6 bg-amber-500 rounded-sm mr-2"},null,-1)),o(" "+l(s.$t("service_layer.hooks.timeline.write_flow")),1)]),e("div",J,[e("div",Q,[t[15]||(t[15]=e("div",{class:"absolute -left-[23px] top-1 w-3 h-3 rounded-full bg-slate-400 border-2 border-white"},null,-1)),t[16]||(t[16]=e("div",{class:"text-sm font-bold text-slate-400 uppercase text-xs mb-1"},"Input",-1)),e("div",W,l(s.$t("service_layer.hooks.timeline.input")),1)]),t[19]||(t[19]=e("div",{class:"relative"},[e("div",{class:"absolute -left-[25px] top-0 w-4 h-4 rounded-full bg-amber-500 border-2 border-white shadow-sm ring-1 ring-amber-200"}),e("div",{class:"text-sm font-bold text-amber-700 text-xs mb-1 bg-amber-50 inline-block px-2 py-0.5 rounded"},"HOOK: beforeCreate/Update/Delete"),e("div",{class:"text-slate-600 text-xs"},"Validation, set default, check business rules...")],-1)),e("div",X,[t[17]||(t[17]=e("div",{class:"absolute -left-[23px] top-1 w-3 h-3 rounded-full bg-blue-500 border-2 border-white"},null,-1)),t[18]||(t[18]=e("div",{class:"text-sm font-bold text-blue-700 text-xs mb-1"},"Repository Action",-1)),e("div",Y,l(s.$t("service_layer.hooks.timeline.repo_action")),1)]),t[20]||(t[20]=e("div",{class:"relative"},[e("div",{class:"absolute -left-[25px] top-0 w-4 h-4 rounded-full bg-purple-500 border-2 border-white shadow-sm ring-1 ring-purple-200"}),e("div",{class:"text-sm font-bold text-purple-700 text-xs mb-1 bg-purple-50 inline-block px-2 py-0.5 rounded"},"HOOK: afterCreate/Update/Delete"),e("div",{class:"text-slate-600 text-xs"},"Audit log, notification, trigger events...")],-1))])]),e("div",Z,[e("h4",ee,[t[21]||(t[21]=e("span",{class:"w-2 h-6 bg-sky-500 rounded-sm mr-2"},null,-1)),o(" "+l(s.$t("service_layer.hooks.timeline.read_flow")),1)]),e("div",te,[e("div",se,[t[22]||(t[22]=e("div",{class:"absolute -left-[23px] top-1 w-3 h-3 rounded-full bg-blue-500 border-2 border-white"},null,-1)),t[23]||(t[23]=e("div",{class:"text-sm font-bold text-blue-700 text-xs mb-1"},"Repository.find...()",-1)),e("div",le,l(s.$t("service_layer.hooks.timeline.repo_read")),1)]),t[26]||(t[26]=e("div",{class:"relative"},[e("div",{class:"absolute -left-[25px] top-0 w-4 h-4 rounded-full bg-sky-500 border-2 border-white shadow-sm ring-1 ring-sky-200"}),e("div",{class:"text-sm font-bold text-sky-700 text-xs mb-1 bg-white inline-block px-2 py-0.5 rounded border border-sky-100"},"HOOK: afterReadEntity(entity)"),e("div",{class:"text-slate-600 text-xs"},"Transient fields, filter ...")],-1)),e("div",oe,[t[24]||(t[24]=e("div",{class:"absolute -left-[23px] top-1 w-3 h-3 rounded-full bg-slate-400 border-2 border-white"},null,-1)),t[25]||(t[25]=e("div",{class:"text-sm font-bold text-slate-500 text-xs mb-1"},"Map to DTO",-1)),e("div",re,l(s.$t("service_layer.hooks.timeline.map_dto")),1)]),t[27]||(t[27]=e("div",{class:"relative"},[e("div",{class:"absolute -left-[25px] top-0 w-4 h-4 rounded-full bg-indigo-500 border-2 border-white shadow-sm ring-1 ring-indigo-200"}),e("div",{class:"text-sm font-bold text-indigo-700 text-xs mb-1 bg-white inline-block px-2 py-0.5 rounded border border-indigo-100"},"HOOK: afterReadDto(dto)"),e("div",{class:"text-slate-600 text-xs"},"Enrich data, format for FE...")],-1))])])]),e("div",ie,[e("div",ae,[e("h4",de,l(s.$t("service_layer.hooks.hooks_list")),1),t[28]||(t[28]=r('<ul class="grid grid-cols-1 gap-2 text-xs font-mono text-indigo-800"><li><span class="text-amber-600">beforeCreate</span> / <span class="text-purple-600">afterCreate</span></li><li><span class="text-purple-600">afterReadEntity</span> / <span class="text-purple-600">afterReadDto</span></li><li><span class="text-amber-600">beforeUpdate</span> / <span class="text-purple-600">afterUpdate</span></li><li><span class="text-amber-600">beforeDelete</span> / <span class="text-purple-600">afterDelete</span></li></ul>',1))]),d(n,{filename:"ProductService.java (Example)",code:b.value},null,8,["code"])])])])]))}};export{pe as default};
